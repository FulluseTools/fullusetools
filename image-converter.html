<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Image Converter Tool</title>
  <style>
    body {
      background-color: #f0f8ff;
      color: #2563eb;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
      padding: 1rem;
      box-sizing: border-box;
    }
    .container {
      padding: 2rem;
      border-radius: 16px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      background-color: #ffffff;
      margin-bottom: 2rem;
    }
    h1 {
      text-align: center;
      margin-bottom: 1.5rem;
      color: #1e40af;
    }
    .input-group {
      margin-bottom: 1rem;
    }
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }
    input, select, button {
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.75rem;
      border: 2px solid #2563eb;
      border-radius: 8px;
      font-size: 1rem;
      color: #2563eb;
      background-color: #ffffff;
      box-sizing: border-box;
    }
    button {
      background-color: #2563eb;
      color: white;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #1e40af;
    }
    button:disabled {
      background-color: #93c5fd;
      cursor: not-allowed;
    }
    .preview-container {
      margin-top: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .preview-section {
      margin-bottom: 1.5rem;
    }
    .preview-section h3 {
      margin-bottom: 0.5rem;
      color: #1e40af;
    }
    img {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .download-btn {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.75rem 1.5rem;
      background-color: #10b981;
      color: white;
      text-align: center;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    .download-btn:hover {
      background-color: #059669;
    }
    .info-text {
      font-size: 0.9rem;
      color: #6b7280;
      margin-top: 0.5rem;
    }
    .status-message {
      padding: 0.75rem;
      border-radius: 8px;
      margin-top: 1rem;
      text-align: center;
    }
    .status-success {
      background-color: #d1fae5;
      color: #065f46;
      border: 1px solid #a7f3d0;
    }
    .status-error {
      background-color: #fee2e2;
      color: #991b1b;
      border: 1px solid #fecaca;
    }
    .pdf-preview {
      width: 100%;
      height: 300px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      margin-top: 0.5rem;
    }
    .conversion-options {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    .conversion-options button {
      flex: 1;
    }
    .pdf-options {
      margin-top: 1rem;
      padding: 1rem;
      background-color: #f8fafc;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Image Converter Tool</h1>
    
    <div class="input-group">
      <label for="imageInput">Select Image</label>
      <input type="file" id="imageInput" accept="image/*" />
      <p class="info-text">Supported formats: JPG, PNG, GIF, WebP</p>
    </div>
    
    <div class="input-group">
      <label for="formatSelect">Convert to Format</label>
      <select id="formatSelect">
        <option value="png">PNG</option>
        <option value="jpeg">JPG</option>
        <option value="gif">GIF</option>
        <option value="webp">WebP</option>
        <option value="pdf">PDF</option>
      </select>
    </div>
    
    <div id="pdfOptions" class="pdf-options" style="display: none;">
      <h3>PDF Options</h3>
      <div class="input-group">
        <label for="pageSize">Page Size</label>
        <select id="pageSize">
          <option value="a4">A4</option>
          <option value="letter">Letter</option>
          <option value="legal">Legal</option>
          <option value="fit">Fit to Image</option>
        </select>
      </div>
      <div class="input-group">
        <label for="orientation">Orientation</label>
        <select id="orientation">
          <option value="portrait">Portrait</option>
          <option value="landscape">Landscape</option>
        </select>
      </div>
    </div>
    
    <div class="conversion-options">
      <button id="convertBtn" onclick="convertImage()" disabled>Convert Image</button>
      <button id="pdfBtn" onclick="convertToPDF()" style="display: none;">Convert to PDF</button>
    </div>
    
    <div id="statusMessage"></div>
    
    <div id="previewContainer" class="preview-container"></div>
  </div>

  <!-- Include jsPDF library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <script>
    let originalFile;
    const { jsPDF } = window.jspdf;

    // Initialize elements
    const imageInput = document.getElementById('imageInput');
    const formatSelect = document.getElementById('formatSelect');
    const pdfOptions = document.getElementById('pdfOptions');
    const convertBtn = document.getElementById('convertBtn');
    const pdfBtn = document.getElementById('pdfBtn');
    const statusMessage = document.getElementById('statusMessage');
    const previewContainer = document.getElementById('previewContainer');

    // Event listeners
    imageInput.addEventListener('change', function(e) {
      if (e.target.files.length > 0) {
        originalFile = e.target.files[0];
        showOriginalPreview();
        convertBtn.disabled = false;
        
        // Show PDF-specific options if PDF is selected
        togglePdfOptions();
      }
    });

    formatSelect.addEventListener('change', function() {
      togglePdfOptions();
    });

    function togglePdfOptions() {
      if (formatSelect.value === 'pdf') {
        pdfOptions.style.display = 'block';
        pdfBtn.style.display = 'block';
        convertBtn.style.display = 'none';
      } else {
        pdfOptions.style.display = 'none';
        pdfBtn.style.display = 'none';
        convertBtn.style.display = 'block';
      }
    }

    function showOriginalPreview() {
      previewContainer.innerHTML = `
        <div class="preview-section">
          <h3>Original Image Preview</h3>
          <img src="${URL.createObjectURL(originalFile)}" alt="Original Image">
        </div>
      `;
    }

    function showStatus(message, type = 'success') {
      statusMessage.innerHTML = `<div class="status-message status-${type}">${message}</div>`;
      
      // Clear status after 5 seconds
      setTimeout(() => {
        statusMessage.innerHTML = '';
      }, 5000);
    }

    function convertImage() {
      if (!originalFile) {
        showStatus("Please upload an image first.", 'error');
        return;
      }

      const format = formatSelect.value;
      
      // For PDF, use the specialized function
      if (format === 'pdf') {
        convertToPDF();
        return;
      }

      const reader = new FileReader();
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      const img = new Image();

      reader.onload = function(event) {
        img.onload = function() {
          canvas.width = img.width;
          canvas.height = img.height;
          ctx.drawImage(img, 0, 0);

          canvas.toBlob(function(blob) {
            const convertedUrl = URL.createObjectURL(blob);
            previewContainer.innerHTML += `
              <div class="preview-section">
                <h3>Converted Image (${format.toUpperCase()})</h3>
                <img src="${convertedUrl}" alt="Converted Image">
                <a class="download-btn" href="${convertedUrl}" download="converted-image.${format}">
                  Download ${format.toUpperCase()} Image
                </a>
              </div>
            `;
            showStatus(`Image successfully converted to ${format.toUpperCase()}!`);
          }, 'image/' + format);
        };
        img.src = event.target.result;
      };

      reader.readAsDataURL(originalFile);
    }

    function convertToPDF() {
      if (!originalFile) {
        showStatus("Please upload an image first.", 'error');
        return;
      }

      const reader = new FileReader();
      const img = new Image();
      
      reader.onload = function(event) {
        img.onload = function() {
          // Get PDF options
          const pageSize = document.getElementById('pageSize').value;
          const orientation = document.getElementById('orientation').value;
          
          // Create PDF
          const pdf = new jsPDF({
            orientation: orientation,
            unit: 'mm',
            format: pageSize === 'fit' ? [img.width * 0.264583, img.height * 0.264583] : pageSize
          });
          
          // Add image to PDF
          pdf.addImage(img, 'JPEG', 0, 0, 
            pageSize === 'fit' ? img.width * 0.264583 : pdf.internal.pageSize.getWidth(),
            pageSize === 'fit' ? img.height * 0.264583 : pdf.internal.pageSize.getHeight());
          
          // Generate PDF blob
          const pdfBlob = pdf.output('blob');
          const pdfUrl = URL.createObjectURL(pdfBlob);
          
          // Show preview and download link
          previewContainer.innerHTML += `
            <div class="preview-section">
              <h3>Converted PDF</h3>
              <iframe src="${pdfUrl}" class="pdf-preview"></iframe>
              <a class="download-btn" href="${pdfUrl}" download="converted-image.pdf">
                Download PDF
              </a>
            </div>
          `;
          
          showStatus('Image successfully converted to PDF!');
        };
        img.src = event.target.result;
      };
      
      reader.readAsDataURL(originalFile);
    }
  </script>
</body>
</html>
